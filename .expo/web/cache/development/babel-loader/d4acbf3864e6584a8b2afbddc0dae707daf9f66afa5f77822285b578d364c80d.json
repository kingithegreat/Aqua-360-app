{"ast":null,"code":"'use strict';\n\nimport { isWindowAvailable } from \"../../PlatformChecker.js\";\nimport { setElementPosition, snapshots } from \"./componentStyle.js\";\nimport { Animations } from \"./config.js\";\nimport { logger } from \"../../logger/index.js\";\nimport { ReanimatedError } from \"../../errors.js\";\nvar PREDEFINED_WEB_ANIMATIONS_ID = 'ReanimatedPredefinedWebAnimationsStyle';\nvar CUSTOM_WEB_ANIMATIONS_ID = 'ReanimatedCustomWebAnimationsStyle';\nvar animationNameToIndex = new Map();\nvar animationNameList = [];\nvar isObserverSet = false;\nexport function configureWebLayoutAnimations() {\n  if (!isWindowAvailable() || document.getElementById(PREDEFINED_WEB_ANIMATIONS_ID) !== null) {\n    return;\n  }\n  var predefinedAnimationsStyleTag = document.createElement('style');\n  predefinedAnimationsStyleTag.id = PREDEFINED_WEB_ANIMATIONS_ID;\n  predefinedAnimationsStyleTag.onload = function () {\n    if (!predefinedAnimationsStyleTag.sheet) {\n      logger.error('Failed to create layout animations stylesheet.');\n      return;\n    }\n    for (var animationName in Animations) {\n      predefinedAnimationsStyleTag.sheet.insertRule(Animations[animationName].style);\n    }\n  };\n  var customAnimationsStyleTag = document.createElement('style');\n  customAnimationsStyleTag.id = CUSTOM_WEB_ANIMATIONS_ID;\n  document.head.appendChild(predefinedAnimationsStyleTag);\n  document.head.appendChild(customAnimationsStyleTag);\n}\nexport function insertWebAnimation(animationName, keyframe) {\n  if (!isWindowAvailable()) {\n    return;\n  }\n  var styleTag = document.getElementById(CUSTOM_WEB_ANIMATIONS_ID);\n  if (!styleTag.sheet) {\n    logger.error('Failed to create layout animations stylesheet.');\n    return;\n  }\n  styleTag.sheet.insertRule(keyframe, 0);\n  animationNameList.unshift(animationName);\n  animationNameToIndex.set(animationName, 0);\n  for (var i = 1; i < animationNameList.length; ++i) {\n    var nextAnimationName = animationNameList[i];\n    var nextAnimationIndex = animationNameToIndex.get(nextAnimationName);\n    if (nextAnimationIndex === undefined) {\n      throw new ReanimatedError('Failed to obtain animation index.');\n    }\n    animationNameToIndex.set(animationNameList[i], nextAnimationIndex + 1);\n  }\n}\nfunction removeWebAnimation(animationName, animationRemoveCallback) {\n  var _styleTag$sheet;\n  if (!isWindowAvailable()) {\n    return;\n  }\n  var styleTag = document.getElementById(CUSTOM_WEB_ANIMATIONS_ID);\n  var currentAnimationIndex = animationNameToIndex.get(animationName);\n  if (currentAnimationIndex === undefined) {\n    throw new ReanimatedError('Failed to obtain animation index.');\n  }\n  animationRemoveCallback();\n  (_styleTag$sheet = styleTag.sheet) === null || _styleTag$sheet === void 0 || _styleTag$sheet.deleteRule(currentAnimationIndex);\n  animationNameList.splice(currentAnimationIndex, 1);\n  animationNameToIndex[\"delete\"](animationName);\n  for (var i = currentAnimationIndex; i < animationNameList.length; ++i) {\n    var nextAnimationName = animationNameList[i];\n    var nextAnimationIndex = animationNameToIndex.get(nextAnimationName);\n    if (nextAnimationIndex === undefined) {\n      throw new ReanimatedError('Failed to obtain animation index.');\n    }\n    animationNameToIndex.set(animationNameList[i], nextAnimationIndex - 1);\n  }\n}\nvar timeoutScale = 1.25;\nvar frameDurationMs = 16;\nvar minimumFrames = 10;\nexport function scheduleAnimationCleanup(animationName, animationDuration, animationRemoveCallback) {\n  var timeoutValue = Math.max(animationDuration * timeoutScale * 1000, animationDuration + frameDurationMs * minimumFrames);\n  setTimeout(function () {\n    return removeWebAnimation(animationName, animationRemoveCallback);\n  }, timeoutValue);\n}\nfunction reattachElementToAncestor(child, parent) {\n  var childSnapshot = snapshots.get(child);\n  if (!childSnapshot) {\n    logger.error('Failed to obtain snapshot.');\n    return;\n  }\n  child.removedAfterAnimation = true;\n  parent.appendChild(child);\n  setElementPosition(child, childSnapshot);\n  var originalOnAnimationEnd = child.onanimationend;\n  child.onanimationend = function (event) {\n    parent.removeChild(child);\n    originalOnAnimationEnd === null || originalOnAnimationEnd === void 0 || originalOnAnimationEnd.call(this, event);\n  };\n}\nfunction findDescendantWithExitingAnimation(node, root) {\n  if (!(node instanceof HTMLElement)) {\n    return;\n  }\n  if (node.reanimatedDummy && node.removedAfterAnimation === undefined) {\n    reattachElementToAncestor(node, root);\n  }\n  var children = Array.from(node.children);\n  for (var i = 0; i < children.length; ++i) {\n    findDescendantWithExitingAnimation(children[i], root);\n  }\n}\nfunction checkIfScreenWasChanged(mutationTarget) {\n  var _mutationTarget$react;\n  var reactFiberKey = '__reactFiber';\n  for (var _i = 0, _Object$keys = Object.keys(mutationTarget); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n    if (key.startsWith('__reactFiber')) {\n      reactFiberKey = key;\n      break;\n    }\n  }\n  return ((_mutationTarget$react = mutationTarget[reactFiberKey]) === null || _mutationTarget$react === void 0 || (_mutationTarget$react = _mutationTarget$react.child) === null || _mutationTarget$react === void 0 || (_mutationTarget$react = _mutationTarget$react.memoizedProps) === null || _mutationTarget$react === void 0 ? void 0 : _mutationTarget$react.navigation) !== undefined;\n}\nexport function addHTMLMutationObserver() {\n  if (isObserverSet || !isWindowAvailable()) {\n    return;\n  }\n  isObserverSet = true;\n  var observer = new MutationObserver(function (mutationsList) {\n    var rootMutation = mutationsList[mutationsList.length - 1];\n    if (checkIfScreenWasChanged(rootMutation.target)) {\n      return;\n    }\n    for (var i = 0; i < rootMutation.removedNodes.length; ++i) {\n      findDescendantWithExitingAnimation(rootMutation.removedNodes[i], rootMutation.target);\n    }\n  });\n  observer.observe(document.body, {\n    childList: true,\n    subtree: true\n  });\n}\nexport function areDOMRectsEqual(r1, r2) {\n  return r1.x === r2.x && r1.y === r2.y && r1.width === r2.width && r1.height === r2.height;\n}","map":{"version":3,"names":["isWindowAvailable","setElementPosition","snapshots","Animations","logger","ReanimatedError","PREDEFINED_WEB_ANIMATIONS_ID","CUSTOM_WEB_ANIMATIONS_ID","animationNameToIndex","Map","animationNameList","isObserverSet","configureWebLayoutAnimations","document","getElementById","predefinedAnimationsStyleTag","createElement","id","onload","sheet","error","animationName","insertRule","style","customAnimationsStyleTag","head","appendChild","insertWebAnimation","keyframe","styleTag","unshift","set","i","length","nextAnimationName","nextAnimationIndex","get","undefined","removeWebAnimation","animationRemoveCallback","_styleTag$sheet","currentAnimationIndex","deleteRule","splice","timeoutScale","frameDurationMs","minimumFrames","scheduleAnimationCleanup","animationDuration","timeoutValue","Math","max","setTimeout","reattachElementToAncestor","child","parent","childSnapshot","removedAfterAnimation","originalOnAnimationEnd","onanimationend","event","removeChild","call","findDescendantWithExitingAnimation","node","root","HTMLElement","reanimatedDummy","children","Array","from","checkIfScreenWasChanged","mutationTarget","_mutationTarget$react","reactFiberKey","_i","_Object$keys","Object","keys","key","startsWith","memoizedProps","navigation","addHTMLMutationObserver","observer","MutationObserver","mutationsList","rootMutation","target","removedNodes","observe","body","childList","subtree","areDOMRectsEqual","r1","r2","x","y","width","height"],"sources":["C:\\Users\\adenk\\OneDrive - Toi Ohomai Institute of Technology\\Desktop\\test\\node_modules\\react-native-reanimated\\src\\layoutReanimation\\web\\domUtils.ts"],"sourcesContent":["'use strict';\n\nimport type { ReanimatedHTMLElement } from '../../js-reanimated';\n\nimport { isWindowAvailable } from '../../PlatformChecker';\nimport { setElementPosition, snapshots } from './componentStyle';\nimport { Animations } from './config';\nimport type { AnimationNames } from './config';\nimport { logger } from '../../logger';\nimport { ReanimatedError } from '../../errors';\n\nconst PREDEFINED_WEB_ANIMATIONS_ID = 'ReanimatedPredefinedWebAnimationsStyle';\nconst CUSTOM_WEB_ANIMATIONS_ID = 'ReanimatedCustomWebAnimationsStyle';\n\n// Since we cannot remove keyframe from DOM by its name, we have to store its id\nconst animationNameToIndex = new Map<string, number>();\nconst animationNameList: string[] = [];\n\nlet isObserverSet = false;\n\n/**\n * Creates `HTMLStyleElement`, inserts it into DOM and then inserts CSS rules\n * into the stylesheet. If style element already exists, nothing happens.\n */\nexport function configureWebLayoutAnimations() {\n  if (\n    !isWindowAvailable() || // Without this check SSR crashes because document is undefined (NextExample on CI)\n    document.getElementById(PREDEFINED_WEB_ANIMATIONS_ID) !== null\n  ) {\n    return;\n  }\n\n  const predefinedAnimationsStyleTag = document.createElement('style');\n  predefinedAnimationsStyleTag.id = PREDEFINED_WEB_ANIMATIONS_ID;\n\n  predefinedAnimationsStyleTag.onload = () => {\n    if (!predefinedAnimationsStyleTag.sheet) {\n      logger.error('Failed to create layout animations stylesheet.');\n      return;\n    }\n\n    for (const animationName in Animations) {\n      predefinedAnimationsStyleTag.sheet.insertRule(\n        Animations[animationName as AnimationNames].style\n      );\n    }\n  };\n\n  const customAnimationsStyleTag = document.createElement('style');\n  customAnimationsStyleTag.id = CUSTOM_WEB_ANIMATIONS_ID;\n\n  document.head.appendChild(predefinedAnimationsStyleTag);\n  document.head.appendChild(customAnimationsStyleTag);\n}\n\nexport function insertWebAnimation(animationName: string, keyframe: string) {\n  // Without this check SSR crashes because document is undefined (NextExample on CI)\n  if (!isWindowAvailable()) {\n    return;\n  }\n\n  const styleTag = document.getElementById(\n    CUSTOM_WEB_ANIMATIONS_ID\n  ) as HTMLStyleElement;\n\n  if (!styleTag.sheet) {\n    logger.error('Failed to create layout animations stylesheet.');\n    return;\n  }\n\n  styleTag.sheet.insertRule(keyframe, 0);\n  animationNameList.unshift(animationName);\n  animationNameToIndex.set(animationName, 0);\n\n  for (let i = 1; i < animationNameList.length; ++i) {\n    const nextAnimationName = animationNameList[i];\n    const nextAnimationIndex = animationNameToIndex.get(nextAnimationName);\n\n    if (nextAnimationIndex === undefined) {\n      throw new ReanimatedError('Failed to obtain animation index.');\n    }\n\n    animationNameToIndex.set(animationNameList[i], nextAnimationIndex + 1);\n  }\n}\n\nfunction removeWebAnimation(\n  animationName: string,\n  animationRemoveCallback: () => void\n) {\n  // Without this check SSR crashes because document is undefined (NextExample on CI)\n  if (!isWindowAvailable()) {\n    return;\n  }\n\n  const styleTag = document.getElementById(\n    CUSTOM_WEB_ANIMATIONS_ID\n  ) as HTMLStyleElement;\n\n  const currentAnimationIndex = animationNameToIndex.get(animationName);\n\n  if (currentAnimationIndex === undefined) {\n    throw new ReanimatedError('Failed to obtain animation index.');\n  }\n\n  animationRemoveCallback();\n\n  styleTag.sheet?.deleteRule(currentAnimationIndex);\n\n  animationNameList.splice(currentAnimationIndex, 1);\n  animationNameToIndex.delete(animationName);\n\n  for (let i = currentAnimationIndex; i < animationNameList.length; ++i) {\n    const nextAnimationName = animationNameList[i];\n    const nextAnimationIndex = animationNameToIndex.get(nextAnimationName);\n\n    if (nextAnimationIndex === undefined) {\n      throw new ReanimatedError('Failed to obtain animation index.');\n    }\n\n    animationNameToIndex.set(animationNameList[i], nextAnimationIndex - 1);\n  }\n}\n\nconst timeoutScale = 1.25; // We use this value to enlarge timeout duration. It can prove useful if animation lags.\nconst frameDurationMs = 16; // Just an approximation.\nconst minimumFrames = 10;\n\nexport function scheduleAnimationCleanup(\n  animationName: string,\n  animationDuration: number,\n  animationRemoveCallback: () => void\n) {\n  // If duration is very short, we want to keep remove delay to at least 10 frames\n  // In our case it is exactly 160/1099 s, which is approximately 0.15s\n  const timeoutValue = Math.max(\n    animationDuration * timeoutScale * 1000,\n    animationDuration + frameDurationMs * minimumFrames\n  );\n\n  setTimeout(\n    () => removeWebAnimation(animationName, animationRemoveCallback),\n    timeoutValue\n  );\n}\n\nfunction reattachElementToAncestor(child: ReanimatedHTMLElement, parent: Node) {\n  const childSnapshot = snapshots.get(child);\n\n  if (!childSnapshot) {\n    logger.error('Failed to obtain snapshot.');\n    return;\n  }\n\n  // We use that so we don't end up in infinite loop\n  child.removedAfterAnimation = true;\n  parent.appendChild(child);\n\n  setElementPosition(child, childSnapshot);\n\n  const originalOnAnimationEnd = child.onanimationend;\n\n  child.onanimationend = function (event: AnimationEvent) {\n    parent.removeChild(child);\n\n    // Given that this function overrides onAnimationEnd, it won't be null\n    originalOnAnimationEnd?.call(this, event);\n  };\n}\n\nfunction findDescendantWithExitingAnimation(\n  node: ReanimatedHTMLElement,\n  root: Node\n) {\n  // Node could be something else than HTMLElement, for example TextNode (treated as plain text, not as HTML object),\n  // therefore it won't have children prop and calling Array.from(node.children) will cause error.\n  if (!(node instanceof HTMLElement)) {\n    return;\n  }\n\n  if (node.reanimatedDummy && node.removedAfterAnimation === undefined) {\n    reattachElementToAncestor(node, root);\n  }\n\n  const children = Array.from(node.children);\n\n  for (let i = 0; i < children.length; ++i) {\n    findDescendantWithExitingAnimation(\n      children[i] as ReanimatedHTMLElement,\n      root\n    );\n  }\n}\n\ntype FiberNodeKey = `__reactFiber${string}`;\n\ninterface FiberNode {\n  memoizedProps?: {\n    navigation?: unknown;\n  };\n\n  child?: FiberNode;\n}\n\ntype WithFiberNode = {\n  [key: FiberNodeKey]: FiberNode;\n};\n\ntype MaybeWithFiberNode = Partial<WithFiberNode>;\n\nfunction checkIfScreenWasChanged(\n  mutationTarget: ReanimatedHTMLElement & MaybeWithFiberNode\n) {\n  let reactFiberKey: FiberNodeKey = '__reactFiber';\n\n  for (const key of Object.keys(mutationTarget)) {\n    if (key.startsWith('__reactFiber')) {\n      reactFiberKey = key as FiberNodeKey;\n      break;\n    }\n  }\n\n  return (\n    mutationTarget[reactFiberKey]?.child?.memoizedProps?.navigation !==\n    undefined\n  );\n}\n\nexport function addHTMLMutationObserver() {\n  if (isObserverSet || !isWindowAvailable()) {\n    return;\n  }\n\n  isObserverSet = true;\n\n  const observer = new MutationObserver((mutationsList) => {\n    const rootMutation = mutationsList[mutationsList.length - 1];\n\n    if (\n      checkIfScreenWasChanged(\n        rootMutation.target as ReanimatedHTMLElement & MaybeWithFiberNode\n      )\n    ) {\n      return;\n    }\n\n    for (let i = 0; i < rootMutation.removedNodes.length; ++i) {\n      findDescendantWithExitingAnimation(\n        rootMutation.removedNodes[i] as ReanimatedHTMLElement,\n        rootMutation.target\n      );\n    }\n  });\n\n  observer.observe(document.body, { childList: true, subtree: true });\n}\n\nexport function areDOMRectsEqual(r1: DOMRect, r2: DOMRect) {\n  // There are 4 more fields, but checking these should suffice\n  return (\n    r1.x === r2.x &&\n    r1.y === r2.y &&\n    r1.width === r2.width &&\n    r1.height === r2.height\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}